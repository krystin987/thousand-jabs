--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Alpha only.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if select(4, GetBuildInfo()) < 80000 then
    return
end

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Module init.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local addonName, TJ, _ = ...
local LibStub, CT, RT, Config, UI, UnitCache = LibStub, CT, RT, TJ.Config, TJ.UI, TJ.UnitCache
local DBG = function(...) TJ:AddDebugLog(...) end

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Locals
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Sandbox
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
LibStub('LibTJSandbox-8.0'):Use(addonName)

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Event Handlers
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

function UnitCache:PLAYER_ENTERING_WORLD(eventName)
    TJ:DevPrint('PLAYER_ENTERING_WORLD(UnitCache)')
    self:UpdateUnitCache('player', true)
end

function UnitCache:PLAYER_TARGET_CHANGED(eventName)
    TJ:DevPrint('PLAYER_TARGET_CHANGED(UnitCache)')
    self:UpdateUnitCache('target', true)
end

UnitCache:RegisterEvent('PLAYER_ENTERING_WORLD')
UnitCache:RegisterEvent('PLAYER_TARGET_CHANGED')
